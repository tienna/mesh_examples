import { PromiseClient } from '@connectrpc/connect';
import { syncConnect, cardano, queryConnect, submitConnect, submit, query } from '@utxorpc/spec';

type GenericTipEvent<Block, Point> = {
    action: "apply";
    block: Block;
} | {
    action: "undo";
    block: Block;
} | {
    action: "reset";
    point: Point;
};
type GenericUtxo<Ref, Parsed> = {
    txoRef: Ref;
    parsedValued: Parsed | undefined;
    nativeBytes: Uint8Array | undefined;
};
type ClientBuilderOptions = {
    uri: string;
    headers?: Record<string, string>;
};

type ChainPoint = {
    slot: number | string;
    hash: string;
};
type Utxo = GenericUtxo<query.TxoRef, cardano.TxOutput>;
type TipEvent = GenericTipEvent<cardano.Block, ChainPoint>;
type TxHash = Uint8Array;
type TxCbor = Uint8Array;
declare class SyncClient {
    inner: PromiseClient<typeof syncConnect.SyncService>;
    constructor(options: ClientBuilderOptions);
    followTip(intersect?: ChainPoint[]): AsyncIterable<TipEvent>;
    fetchBlock(p: ChainPoint): Promise<cardano.Block>;
}
declare class QueryClient {
    inner: PromiseClient<typeof queryConnect.QueryService>;
    constructor(options: ClientBuilderOptions);
    readParams(): Promise<cardano.PParams>;
    readUtxosByOutputRef(refs: {
        txHash: Uint8Array;
        outputIndex: number;
    }[]): Promise<Utxo[]>;
    private searchUtxosByMatch;
    searchUtxosByAddress(address: Uint8Array): Promise<Utxo[]>;
    searchUtxosByPaymentPart(paymentPart: Uint8Array): Promise<Utxo[]>;
    searchUtxosByDelegationPart(delegationPart: Uint8Array): Promise<Utxo[]>;
    searchUtxosByAsset(policyId?: Uint8Array, name?: Uint8Array): Promise<Utxo[]>;
    searchUtxosByAddressWithAsset(address: Uint8Array, policyId?: Uint8Array, name?: Uint8Array): Promise<Utxo[]>;
}
declare class SubmitClient {
    inner: PromiseClient<typeof submitConnect.SubmitService>;
    constructor(options: ClientBuilderOptions);
    submitTx(tx: TxCbor): Promise<TxHash>;
    waitForTx(txHash: TxHash): AsyncIterable<submit.Stage>;
}

export { QueryClient as CardanoQueryClient, SubmitClient as CardanoSubmitClient, SyncClient as CardanoSyncClient };
