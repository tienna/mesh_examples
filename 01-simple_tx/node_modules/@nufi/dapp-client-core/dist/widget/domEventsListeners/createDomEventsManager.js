"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createDomEventsManager = void 0;
const utils_1 = require("../../core/utils");
const createOnClickOutsideWidgetHandlers_1 = require("./createOnClickOutsideWidgetHandlers");
const createDomEventsManager = () => {
    let clickOutsideWidgetHandlers;
    const createOnClickOutsideWidgetHandlers = ({ clickOutsideElementSelector, handleClickAway, }) => {
        clickOutsideWidgetHandlers = (0, createOnClickOutsideWidgetHandlers_1.createOnClickOutsideWidgetHandlers)({
            elementQuerySelector: clickOutsideElementSelector,
            handleClickAway,
        });
    };
    const registerNufiWidgetManagementListener = (onNufiWidgetManagementMessage) => {
        // We are only checking message structure here, not the origin,
        // as this code anyways runs in untrusted environment.
        window.addEventListener('message', (e) => {
            if (!(0, utils_1.isNufiWidgetManagementMessage)(e))
                return;
            onNufiWidgetManagementMessage(e);
        });
    };
    const getClickOutsideWidgetHandlers = () => {
        if (clickOutsideWidgetHandlers == null) {
            throw Error('On Click Outside Widget Handlers were not created.');
        }
        return clickOutsideWidgetHandlers;
    };
    return {
        registerNufiWidgetManagementListener,
        createOnClickOutsideWidgetHandlers,
        getClickOutsideWidgetHandlers,
    };
};
exports.createDomEventsManager = createDomEventsManager;
//# sourceMappingURL=createDomEventsManager.js.map